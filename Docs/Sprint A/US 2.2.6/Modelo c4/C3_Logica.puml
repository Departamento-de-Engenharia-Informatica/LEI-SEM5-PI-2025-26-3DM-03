@startuml C3_Manage_Representatives_Logical_View
title C3 – Manage Representatives API (Logical View)
left to right direction
hide empty members

skinparam rectangle {
  BackgroundColor White
  BorderColor Black
  FontColor Black
}
skinparam database {
  BackgroundColor Wheat
  BorderColor Black
  FontColor Black
}
skinparam actor {
  BackgroundColor CornflowerBlue
  FontColor White
  BorderColor Black
}

actor "Port Authority Officer" as Officer

rectangle "Port Logistics Management System (PLMS)" as PLMS {
  rectangle "Representatives Management API\n(ASP.NET Core Web API)" as API
  rectangle "RepresentativeService\n(Business rules & validation)" as Service
  rectangle "RepresentativeMapper\n(DTO ↔ Domain)" as Mapper
  rectangle "IShippingAgentRepository\n(Abstraction)" as Repo
  rectangle "PortContext\n(Entity Framework Core)" as Context
}

database "Database System\n(SQL / SQLite)" as DB
rectangle "External IAM Provider\n(OAuth 2.0 / OIDC)" as IAM
rectangle "Notification Services\n(Email / SMS)" as Notif

Officer --> IAM : obtains access token (OAuth 2.0)
Officer --> API : POST/PUT/POST(deactivate)\n/api/ShippingAgents/{taxNumber}/Representatives (Bearer JWT)

API --> Service : Create/Update/Deactivate
Service --> Mapper : map DTOs ↔ Representative
Service --> Repo : Load org by taxNumber\n+ SaveChangesAsync
Repo --> Context : EF Core operations
Context --> DB : persist Representatives (scoped to org)

API --> Notif : optional notifications to reps (email/SMS)

@enduml
