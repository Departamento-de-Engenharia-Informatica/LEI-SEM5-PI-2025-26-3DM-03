@startuml C2_View_VesselVisitNotifications_SSD
title C2 — System Sequence Diagram (Process View)\nUS — View Vessel Visit Notifications Status
autonumber

actor "Shipping Agent Representative" as Rep
actor "Port Authority Officer" as Officer
participant "Frontend Web App" as Frontend
participant "Vessel Visit Notifications API" as API
database "PLMS Database" as DB

== Consulta de notificações pelo representante ==
Rep -> Frontend : Acede ao menu "Vessel Visit Notifications"
Frontend -> API : GET /api/VesselVisitNotifications\n(?vesselId, ?status, ?representativeEmail, ?from, ?to)
API -> DB : SELECT * FROM VesselVisitNotifications\nWHERE AgentId = callerAgentId\nAND filtros aplicados
DB --> API : Lista de notificações
API --> Frontend : 200 OK (List<VesselVisitNotificationDTO>)
Frontend --> Rep : Mostra lista filtrada\n(status: InProgress, Pending, Approved, Rejected)

== Visualização detalhada ==
Rep -> Frontend : Seleciona uma notificação
Frontend -> API : GET /api/VesselVisitNotifications/{id}
API -> DB : SELECT por Id
DB --> API : Detalhes da notificação
API --> Frontend : 200 OK (VesselVisitNotificationDTO)
Frontend --> Rep : Mostra detalhes (status, dock, motivo de rejeição, etc.)

== Consulta pelo Port Authority Officer ==
Officer -> Frontend : Filtra por status "Pending"
Frontend -> API : GET /api/VesselVisitNotifications?status=Pending
API -> DB : SELECT notificações pendentes
DB --> API : Lista pendente
API --> Frontend : 200 OK (List<VesselVisitNotificationDTO>)
Frontend --> Officer : Mostra lista de notificações pendentes

@enduml
