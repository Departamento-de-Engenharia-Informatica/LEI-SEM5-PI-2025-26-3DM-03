@startuml C4_Manage_Resources_Process_View
title C4 – Manage Resources (Process View – Create / Update / List / Deactivate Resources)
hide footbox

actor "Port Authority Officer" as Officer
participant "Frontend Web App\n(React / Angular)" as Frontend
participant "Resources Management API\n(ASP.NET Core)" as API
participant "External IAM Provider\n(OAuth 2.0 / OIDC)" as IAM
database "PLMS Database\n(SQL / InMemory)" as DB

== Authentication ==
Officer -> Frontend : Sign in (credentials)
Frontend -> IAM : Requests OAuth 2.0 Token
IAM --> Frontend : Returns Access Token (JWT)

== List Resources ==
Officer -> Frontend : Opens Resources dashboard
Frontend -> API : GET /api/Resources (Bearer Token)
API -> IAM : Validates JWT Token
IAM --> API : Token valid
API -> DB : SELECT * FROM Resources
DB --> API : Returns list
API --> Frontend : HTTP 200 OK (JSON)
Frontend --> Officer : Displays resource list

== Create Resource ==
Officer -> Frontend : Fill form (code, description, type, capacity)
Frontend -> API : POST /api/Resources (JSON + Bearer Token)
API -> IAM : Validates JWT Token
IAM --> API : Token valid
API -> DB : INSERT INTO Resources (...)
DB --> API : Confirmation
API --> Frontend : HTTP 201 Created (ResourceDTO)
Frontend --> Officer : Shows creation confirmation

== Update Resource ==
Officer -> Frontend : Edit existing Resource
Frontend -> API : PUT /api/Resources/{code} (JSON + Bearer Token)
API -> IAM : Validates JWT Token
IAM --> API : Token valid
API -> DB : UPDATE Resources SET ... WHERE Code = ...
DB --> API : Confirmation
API --> Frontend : HTTP 204 No Content
Frontend --> Officer : Shows update success

== Deactivate Resource ==
Officer -> Frontend : Deactivate Resource
Frontend -> API : PUT /api/Resources/{code}/deactivate (Bearer Token)
API -> IAM : Validates JWT Token
IAM --> API : Token valid
API -> DB : UPDATE Resources SET Status = 'Inactive' WHERE Code = ...
DB --> API : Confirmation
API --> Frontend : HTTP 204 No Content
Frontend --> Officer : Shows deactivation confirmation

@enduml