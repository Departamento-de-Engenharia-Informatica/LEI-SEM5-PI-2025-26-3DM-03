@startuml C4_Manage_Qualifications_Process_View
title C4 – Manage Qualifications (Process View – Create / Update / List Qualifications)
hide footbox

actor "Port Authority Officer" as Officer
participant "Frontend Web App\n(React / Angular)" as Frontend
participant "Qualifications Management API\n(ASP.NET Core)" as API
participant "External IAM Provider\n(OAuth 2.0 / OIDC)" as IAM
database "PLMS Database\n(SQL / InMemory)" as DB

== Autenticação ==
Officer -> Frontend : Inicia sessão (credenciais)
Frontend -> IAM : Solicita Token OAuth 2.0
IAM --> Frontend : Retorna Access Token (JWT)

== Gestão de Qualifications ==
Officer -> Frontend : Abre painel de Qualifications
Frontend -> API : GET /api/Qualifications (Bearer Token)
API -> IAM : Valida token JWT
IAM --> API : Token válido
API -> DB : SELECT * FROM Qualifications
DB --> API : Lista de QualificationDTO
API --> Frontend : HTTP 200 OK (JSON)
Frontend --> Officer : Apresenta lista

== Criação de Qualification ==
Officer -> Frontend : Preenche formulário (código, descrição)
Frontend -> API : POST /api/Qualifications (JSON + Bearer Token)
API -> IAM : Valida token JWT
IAM --> API : Token válido
API -> DB : INSERT INTO Qualifications (...)
DB --> API : Confirmação (OK)
API --> Frontend : HTTP 201 Created (QualificationDTO)
Frontend --> Officer : Confirma criação

== Atualização de Qualification ==
Officer -> Frontend : Edita Qualification existente
Frontend -> API : PUT /api/Qualifications/{id} (JSON + Bearer Token)
API -> IAM : Valida token JWT
IAM --> API : Token válido
API -> DB : UPDATE Qualifications SET ... WHERE id = ...
DB --> API : Confirmação (OK)
API --> Frontend : HTTP 200 OK (QualificationDTO)
Frontend --> Officer : Confirma alteração

@enduml
