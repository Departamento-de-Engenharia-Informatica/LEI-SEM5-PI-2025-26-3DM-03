@startuml C3_Manage_Qualifications_Process_View
title C3 â€“ Manage Qualifications (Component / Process Sequence)
hide footbox

actor "Port Authority Officer" as Officer
participant "QualificationsController" as Controller
participant "QualificationMapper" as Mapper
participant "PortContext (EF Core)" as Context
database "PLMS Database" as DB
participant "External IAM Provider" as IAM

== Create Qualification ==
Officer -> Controller : POST /api/Qualifications (QualificationDTO + Bearer)
Controller -> IAM : Validate Token
IAM --> Controller : Token OK
Controller -> Mapper : Map to Qualification entity
Controller -> Context : Add(Qualification) -> SaveChanges()
Context -> DB : INSERT
DB --> Context : OK
Controller --> Officer : HTTP 201 Created (QualificationDTO)

== Update Qualification ==
Officer -> Controller : PUT /api/Qualifications/{code} (QualificationDTO)
Controller -> IAM : Validate Token
IAM --> Controller : Token OK
Controller -> Context : Find(code) -> Update -> SaveChanges()
Context -> DB : UPDATE
DB --> Context : OK
Controller --> Officer : HTTP 200 OK (QualificationDTO)

== List Qualifications ==
Officer -> Controller : GET /api/Qualifications
Controller -> IAM : Validate Token
IAM --> Controller : Token OK
Controller -> Context : Query Qualifications
Context -> DB : SELECT
DB --> Context : Result
Controller -> Mapper : Map to QualificationDTOs
Controller --> Officer : HTTP 200 OK (JSON)

@enduml