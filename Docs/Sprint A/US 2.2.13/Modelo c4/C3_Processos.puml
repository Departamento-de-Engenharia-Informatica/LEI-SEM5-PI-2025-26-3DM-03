@startuml C3_Manage_Qualifications_Process_View
title C3 â€“ Manage Qualifications (Component / Process Sequence)
hide footbox

actor "Port Authority Officer" as Officer
participant "QualificationsController" as Controller
participant "QualificationService" as Service
participant "QualificationMapper" as Mapper
participant "PortContext (EF Core)" as Context
database "PLMS Database" as DB
participant "External IAM Provider" as IAM

== Create Qualification ==
Officer -> Controller : POST /api/Qualifications (CreateQualificationDTO + Bearer)
Controller -> IAM : Validate Token
IAM --> Controller : Token OK
Controller -> Service : CreateAsync(dto)
Service -> Mapper : Map to Qualification entity
Service -> Context : Add(Qualification) -> SaveChanges()
Context -> DB : INSERT
DB --> Context : OK
Service -> Mapper : Map to QualificationDTO
Controller --> Officer : HTTP 201 Created (QualificationDTO)

== Update Qualification ==
Officer -> Controller : PUT /api/Qualifications/{code} (UpdateQualificationDTO)
Controller -> IAM : Validate Token
IAM --> Controller : Token OK
Controller -> Service : UpdateAsync(code, dto)
Service -> Context : Find(code) -> Update -> SaveChanges()
Context -> DB : UPDATE
DB --> Context : OK
Controller --> Officer : HTTP 204 No Content

== List Qualifications ==
Officer -> Controller : GET /api/Qualifications
Controller -> IAM : Validate Token
IAM --> Controller : Token OK
Controller -> Service : GetAllAsync()
Service -> Context : SELECT * FROM Qualifications
Context -> DB : SELECT
DB --> Context : Result
Service -> Mapper : Map to QualificationDTOs
Controller --> Officer : HTTP 200 OK (JSON)

@enduml