@startuml C3_Processos
title C3 — Sequência (UpdateDock)

actor Officer
participant Controller as "DocksController"
participant Service as "DockService"
participant Repo as "IDockRepository"
participant VT as "IVesselTypeRepository"

Officer -> Controller: PUT /api/Docks/{id} (UpdateDockDTO)
Controller -> Service: UpdateDockAsync(id,dto)
Service -> Service: validar (id == dto.Id)\nse não → throw ArgumentException
Service -> Repo: GetByIdAsync(id)
Repo --> Service: Dock|null
Service -> Service: se null → throw KeyNotFoundException
opt AllowedVesselTypeIds fornecidos
  loop para cada vtId
    Service -> VT: GetByIdAsync(vtId)
    VT --> Service: VesselType|null
    Service -> Service: se null → throw ArgumentException
  end
  Service -> Service: dock.AllowedVesselTypes = novos
end
Service -> Repo: UpdateAsync(dock)
Repo --> Service: OK
Service --> Controller: void
Controller --> Officer: 204 No Content
@enduml
