@startuml C3_Register_Shipping_Agents_Implementation_View
title C3 – Register Shipping Agents (Implementation / Package & Class View)
left to right direction
hide empty members

skinparam package {
  BackgroundColor White
  BorderColor Black
  FontColor Black
  FontStyle bold
}

skinparam class {
  BackgroundColor White
  BorderColor Black
  FontColor Black
}

' ======================
' Packages conforme ao teu projeto
' ======================

package "Controllers.ShippingOrganizations" {
  class ShippingAgentsController {
    + GetAll() : ActionResult<IEnumerable<ShippingAgentDTO>>
    + GetByTaxNumber(taxNumber: long) : ActionResult<ShippingAgentDTO>
    + Post(dto: CreateShippingAgentDTO) : ActionResult<ShippingAgentDTO>
    + Put(taxNumber: long, dto: CreateShippingAgentDTO) : IActionResult
    + Delete(taxNumber: long) : IActionResult
  }
}

package "Models.ShippingOrganizations" {
  class ShippingAgent {
    + TaxNumber : long
    + LegalName : string
    + AlternativeName : string
    + Type : ShippingAgentType
    + Address : Address
    + Representatives : List<Representative>
  }

  class Representative {
    + Name : string
    + CitizenID : string
    + Nationality : string
    + Email : string
    + PhoneNumber : string
  }

  class Address {
    + Street : string
    + City : string
    + PostalCode : string
    + Country : string
  }

  class ShippingAgentType <<VO>> {
    + Value : string
    + Owner
    + Operator
    + ToString() : string
    + implicit operator string(ShippingAgentType)
    + implicit operator ShippingAgentType(string)
  }

  class ShippingAgentDTO {
    + TaxNumber : long
    + LegalName : string
    + AlternativeName : string
    + Type : string
    + Address : Address
    + Representatives : List<Representative>
  }

  class CreateShippingAgentDTO {
    + TaxNumber : long
    + LegalName : string
    + AlternativeName : string
    + Type : string
    + Address : Address
    + Representatives : List<Representative>
  }

  class ShippingAgentMapper {
    + ToDomain(dto: CreateShippingAgentDTO) : ShippingAgent
    + ToDTO(model: ShippingAgent) : ShippingAgentDTO
  }
}

package "Data" {
  class PortContext {
    + ShippingAgents : DbSet<ShippingAgent>
    + SaveChanges() : int
  }
}

' ======================
' Relações
' ======================

ShippingAgentsController --> ShippingAgentMapper : usa para conversões DTO↔Domínio
ShippingAgentsController --> PortContext : acede à base de dados (EF Core)

ShippingAgentMapper --> ShippingAgent : converte entidade
ShippingAgentMapper --> ShippingAgentDTO : converte DTO
ShippingAgentMapper --> CreateShippingAgentDTO

PortContext --> ShippingAgent : DbSet<>

ShippingAgent *-- Address
ShippingAgent *-- Representative
ShippingAgent --> ShippingAgentType

@enduml
