@startuml C2_Register_ShippingAgents_SSD
title C2 — System Sequence Diagram (Process View)
autonumber

actor "Organization Representative" as Rep
actor "Port Authority Officer" as Officer
participant "Frontend Web App" as Frontend
participant "Shipping Agents API" as API
database "PLMS Database" as DB

== Submissão do registo ==
Rep -> Frontend : Preenche formulário e submete
Frontend -> API : POST /api/shipping-agents (CreateShippingAgentDTO)
API -> API : Validar dados obrigatórios
API -> DB : INSERT ShippingAgent + Representatives
DB --> API : OK
API --> Frontend : 201 Created (ShippingAgentDTO)
Frontend --> Rep : Mostra confirmação de registo

== Revisão pelo Officer ==
Officer -> Frontend : Consulta registos pendentes
Frontend -> API : GET /api/shipping-agents/pending
API -> DB : SELECT pending registrations
DB --> API : Lista de pendentes
API --> Frontend : JSON (registos pendentes)
Frontend --> Officer : Mostra lista

Officer -> Frontend : Aprova ou solicita alterações
Frontend -> API : PUT /api/shipping-agents/{id}/approve | request-changes
API -> DB : UPDATE status / remarks
DB --> API : OK
API --> Frontend : Confirmação
Frontend --> Officer : Mostra resultado da ação
@enduml
