@startuml C3_Manage_Storage_Areas_Process_View
title C3 – Manage Storage Areas (Process View / System Sequence Diagram)
hide footbox

actor "Port Authority Officer" as Officer
participant "StorageAreasController\n(API Layer)" as Controller
participant "StorageAreaMapper\n(Conversão DTO ↔ Entidade)" as Mapper
participant "PortContext\n(Entity Framework Core)" as Context
database "Database System\n(SQL / InMemory)" as DB

Officer -> Controller : POST /api/StorageAreas (CreateStorageAreaDTO)
Controller -> Mapper : Converte DTO para Entidade StorageArea
Mapper --> Controller : Retorna Entidade StorageArea
Controller -> Controller : Valida regra (occupancy ≤ capacity)
alt Validação Falha
  Controller --> Officer : HTTP 400 BadRequest
else Validação OK
  Controller -> Context : Adiciona StorageArea e chama SaveChanges()
  Context -> DB : INSERT INTO StorageAreas (...)
  DB --> Context : Confirma inserção
  Controller --> Officer : HTTP 201 Created (StorageAreaDTO)
end

@enduml

